<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Dashboard App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.0/dist/chart.umd.min.js" defer></script>
  <style>
    :root {
      --nav-bg: #F6F6F6;
      --line-color: #F6F6F6;
      --bg: #FCFCFC;
      --accent-gradient: linear-gradient(90deg, #A2D5C6, #CFFFE2);
      --text-dark: #333333;
      --card-bg: #F6F6F6;
    }
    body { background: var(--bg); color: var(--text-dark); padding-bottom: 70px; }
    @media (min-width:992px){ body{padding-bottom:0;} }
    .page{display:none;opacity:0;transition:opacity .3s ease;}
    .page.active{display:block;opacity:1;}
    .card-box{border:1px solid var(--line-color);border-radius:.5rem;background:var(--card-bg);padding:1rem;}
    .spinner-container{display:flex;justify-content:center;align-items:center;height:100%;}
    .navbar-custom{background:var(--nav-bg)!important;border-bottom:1px solid var(--line-color);}
    .navbar-custom .navbar-nav{align-items:center;}
    .navbar-custom .nav-link{color:var(--text-dark)!important;padding-bottom:.5rem;position:relative;}
    .navbar-custom .nav-link.active::after{content:'';position:absolute;bottom:0;left:0;width:100%;height:4px;background:var(--accent-gradient);border-radius:2px 2px 0 0;}
    .btn-accent{background:var(--accent-gradient);border:none;color:var(--text-dark);}
    .btn-accent:hover,.btn-accent:focus{opacity:.8;}
    .navbar-mobile{background:var(--nav-bg);border-top:1px solid var(--line-color);}
    .navbar-mobile .nav-link{position:relative;color:var(--text-dark)!important;display:flex;flex-direction:column;align-items:center;}
    .navbar-mobile .nav-link .nav-text{font-size:0.7rem;margin-top:4px;}
    .navbar-mobile .nav-link.active::before{content:'';position:absolute;top:0;left:50%;transform:translateX(-50%);width:40%;height:4px;background:var(--accent-gradient);}
    .dropdown-toggle::after{display:none;}
    .company-btn{width:40px;height:40px;padding:0;border-radius:50%;overflow:hidden;}
  </style>
</head>
<body>
  <!-- Desktop Navbar -->
  <nav class="navbar navbar-expand-lg navbar-custom shadow-sm d-none d-lg-flex">
    <div class="container-fluid justify-content-between align-items-center">
      <a class="navbar-brand d-flex align-items-center" href="#">
        <i class="bi bi-bar-chart-line-fill me-2" style="color:var(--text-dark);"></i>
        <span class="fw-bold" style="color:var(--text-dark);">AppName</span>
      </a>
      <ul class="navbar-nav mx-auto">
        <li class="nav-item"><a class="nav-link" href="#" data-page="dashboard">Dashboard</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-page="finance">Finance</a></li>
        <li class="nav-item"><a class="nav-link" href="#" data-page="accounts">Accounts</a></li>
      </ul>
      <div class="dropdown">
        <button class="btn btn-light company-btn dropdown-toggle p-0" type="button" id="companyDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTm9G79ANl7LanIlaSbJibX_O-nHjMqCr8N6Q&s" alt="Компания 1" class="w-100">
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="companyDropdown">
          <li><a class="dropdown-item d-flex align-items-center" data-company="company1"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTm9G79ANl7LanIlaSbJibX_O-nHjMqCr8N6Q&s" width="24" class="me-2" alt="Лого 1">Компания 1</a></li>
          <li><a class="dropdown-item d-flex align-items-center" data-company="company2"><img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuyK9oaIYnSWqW3waOIj14bUudBZ_8KoWIlw&s" width="24" class="me-2" alt="Лого 2">Компания 2</a></li>
        </ul>
      </div>
    </div>
  </nav>

  <main class="container my-4">
    <!-- Dashboard -->
    <div id="dashboard" class="page">
      <h2 class="mb-4">Dashboard</h2>
      <div class="row g-3">
        <div class="col-lg-2 col-md-4 col-sm-6"><div class="card-box"><h6>Выручка</h6><h3 id="metric-revenue">$0</h3><canvas id="miniTrendRevenue" width="80" height="40"></canvas></div></div>
        <div class="col-lg-2 col-md-4 col-sm-6"><div class="card-box"><h6>Чистая прибыль</h6><h3 id="metric-net-profit">0%</h3><div class="progress"><div id="profit-plan-bar" class="progress-bar" role="progressbar" style="width:0%"></div></div></div></div>
        <div class="col-lg-2 col-md-4 col-sm-6"><div class="card-box"><h6>Остаток средств</h6><h3 id="metric-cash">$0</h3></div></div>
        <div class="col-lg-2 col-md-4 col-sm-6"><div class="card-box"><h6>Дебиторка</h6><h3 id="metric-receivables">$0</h3><small>Просрочено: <span id="receivables-overdue">0%</span></small></div></div>
        <div class="col-lg-2 col-md-4 col-sm-6"><div class="card-box"><h6>План продаж</h6><canvas id="gauge-sales" width="80" height="80"></canvas></div></div>
        <div class="col-lg-2 col-md-4 col-sm-6"><div class="card-box"><h6>Новые клиенты</h6><h3 id="metric-new-clients">0</h3></div></div>
        <div class="col-lg-2 col-md-4 col-sm-6"><div class="card-box"><h6>Средний чек</h6><h3 id="metric-avg-check">$0</h3><small id="avg-check-change">+0%</small></div></div>
      </div>
      <div class="row mt-4">
        <div class="col-lg-8"><div class="card-box"><canvas id="salesChart"></canvas></div></div>
        <div class="col-lg-4"><div class="card-box"><h5>Последние операции</h5><ul id="recent-ops" class="list-group list-group-flush"><li class="spinner-container"><div class="spinner-border"></div></li></ul></div></div>
      </div>
    </div>

    <!-- Finance -->
    <div id="finance" class="page">
      <h2 class="mb-4">Finance</h2>
      <!-- содержимое Finance -->
    </div>

    <!-- Accounts -->
    <div id="accounts" class="page">
      <h2 class="mb-4">Accounts</h2>
      <!-- содержимое Accounts -->
    </div>
  </main>

  <!-- Mobile Navbar -->
  <nav class="navbar navbar-light navbar-mobile fixed-bottom d-lg-none shadow-lg">
    <div class="container-fluid d-flex justify-content-around align-items-center">
      <div class="dropdown">
        <button class="btn btn-light company-btn dropdown-toggle" type="button" id="companyDropdownMobile" data-bs-toggle="dropdown" aria-expanded="false">
          <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTm9G79ANl7LanIlaSbJibX_O-nHjMqCr8N6Q&s" alt="Компания 1" class="w-100">
        </button>
        <ul class="dropdown-menu" aria-labelledby="companyDropdownMobile">
          <li><a class="dropdown-item" data-company="company1">Компания 1</a></li>
          <li><a class="dropdown-item" data-company="company2">Компания 2</a></li>
        </ul>
      </div>
      <a class="nav-link" href="#" data-page="dashboard"><i class="bi bi-house-door-fill fs-4"></i><span class="nav-text">Dashboard</span></a>
      <a class="nav-link" href="#" data-page="finance"><i class="bi bi-cash-coin fs-4"></i><span class="nav-text">Finance</span></a>
      <a class="nav-link" href="#" data-page="accounts"><i class="bi bi-journal-check fs-4"></i><span class="nav-text">Accounts</span></a>
    </div>
  </nav>

  <script defer>
    document.addEventListener('DOMContentLoaded',()=>{
      const links=document.querySelectorAll('.nav-link[data-page]');
      const pages=document.querySelectorAll('.page');
      const show=id=>{pages.forEach(p=>p.classList.remove('active'));document.getElementById(id)?.classList.add('active');links.forEach(l=>l.classList.toggle('active',l.dataset.page===id));};
      links.forEach(l=>l.addEventListener('click',e=>{e.preventDefault();show(l.dataset.page);}));
      document.querySelectorAll('[data-company]').forEach(el=>el.addEventListener('click',e=>{ const comp = e.target.getAttribute('data-company'); let url=''; if(comp==='company1') url='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTm9G79ANl7LanIlaSbJibX_O-nHjMqCr8N6Q&s'; else if(comp==='company2') url='https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTuyK9oaIYnSWqW3waOIj14bUudBZ_8KoWIlw&s'; document.querySelectorAll('.company-btn img').forEach(img=>img.src=url); /* reload data by company */ }));
      show('dashboard');
    });
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" defer></script>
</body>
</html>
