<?php
/**
 * get_questions.php
 *
 * 1. Запускает уникальную сессию для пользователя.
 * 2. Сохраняет серверное время начала теста в сессию.
 * 3. Загружает и отдает текстовый файл с вопросами.
 */

// 1. Запускаем сессию. Это должно быть в самом начале файла!
session_start();

// 2. Записываем текущее время сервера (в секундах) в переменную сессии
$_SESSION['test_start_time'] = time();


// ===================================================================
// НАСТРОЙКА: Прямая ссылка на ваш questions.txt
// ===================================================================
$google_drive_url = 'https://drive.google.com/uc?export=download&id=1UFGBzB9XuqDnzaI0vXkEYjMbaCkkDd3o';

// Устанавливаем заголовок, чтобы клиент понял, что мы отдаем обычный текст
header('Content-Type: text/plain; charset=utf-8');

// 3. Получаем и отдаем содержимое файла (логика осталась прежней)
$file_content = @file_get_contents($google_drive_url);

if ($file_content === false) {
    http_response_code(500);
    echo "Ошибка на сервере: не удалось загрузить файл с вопросами из Google Drive.";
} else {
    echo $file_content;
}
?>